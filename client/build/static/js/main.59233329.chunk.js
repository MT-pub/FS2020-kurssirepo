(this["webpackJsonpfs-projekti"]=this["webpackJsonpfs-projekti"]||[]).push([[0],{155:function(e){e.exports=JSON.parse('{"app.tests-button":"Tentit","app.graphs-button":"Kuvaajat","app.control-button":"Hallinta","app.show-answers-button":"N\xe4yt\xe4 Vastaukset","app.add-question-button":"Lis\xe4\xe4 kysymys","app.add-test-button":"Lis\xe4\xe4 tentti","error.db-no-fetch":"Tietokannan alustaminen ep\xe4onnistui"}')},156:function(e){e.exports=JSON.parse('{"app.tests-button":"Tests","app.graphs-button":"Graphs","app.control-button":"Control","app.show-answers-button":"Show answers","app.add-question-button":"Add question","app.add-test-button":"Add test"}')},177:function(e,t,a){},324:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(0),r=a.n(s),c=a(11),i=a.n(c),o=(a(177),a(58)),d=a(25),u=a.n(d),l=a(48),j=a(20),p=(a(91),a(365)),b=a(366),h=a(361),x=a(87),v=a(49),O=a.n(v),f=a(370),g=a(371),m=a(325),k=a(88),w=a(6),T=Object(w.a)({root:{color:k.a[400],"&$checked":{color:k.a[600]}},checked:{}})((function(e){return Object(n.jsx)(f.a,Object(o.a)({color:"default"},e))}));function y(e){var t=e.testIndex,a=e.q,s=e.qIndex,r=e.answers,c=e.dispatch;return Object(n.jsx)(m.a,{children:Object(n.jsxs)("div",{children:[a.text," ",Object(n.jsx)("br",{}),a.answers.map((function(e,a){return function(e,a,s){return Object(n.jsxs)("div",{children:[Object(n.jsx)(g.a,{control:Object(n.jsx)(f.a,{color:r?"primary":"secondary",checked:e.checked,onChange:r?null:function(e){return c({type:"changeAnswer",event:e,qIndex:s,aIndex:a})}}),label:r?null:e.text}),r?Object(n.jsx)(g.a,{control:Object(n.jsx)(T,{checked:e.correct}),label:r?e.text:null}):null,Object(n.jsx)("br",{})]},"answer"+t+s+a)}(e,a,s)}))]})})}var I=r.a.memo(y),C=a(362);var q=function(e){var t=e.testData,a=e.testIndex,s=e.answers,r=e.dispatch;return""!==a&&t.questions?Object(n.jsxs)(n.Fragment,{children:[t.questions.map((function(e,c){return Object(n.jsx)(I,{q:e,qIndex:c,testData:t,testIndex:a,answers:s,dispatch:r},"question"+t.testid+e.id)})),s?null:Object(n.jsx)("div",{children:Object(n.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){r({type:"setAnswers",payload:!0})},children:Object(n.jsx)(C.a,{id:"app.show-answers-button",defaultMessage:"Show answers",description:"Tests-button on AppBar"})},t.name+" showAnswers")})]}):null};var A=function(e){var t=e.state,a=e.dispatch,r=Object(s.useMemo)((function(){if(t.data!==[])return t.data.map((function(e,s){return Object(n.jsx)(h.a,{color:"primary",onClick:function(){a({type:"setTest",test:s}),a({type:"setAnswers",payload:!1})},children:e.name},""+t.data[s].id+t.data[s].name)}))}),[t.data,a]);return t.data.length&&""!==t.activeTest&&t.data[t.activeTest].kysymykset!==[]?Object(n.jsxs)("div",{className:"page",children:[Object(n.jsx)("div",{children:r}),Object(n.jsx)("div",{className:"test",children:Object(n.jsx)(q,{testData:t.data[t.activeTest],dispatch:a,answers:t.answers,testIndex:t.activeTest})})]}):Object(n.jsx)("div",{className:"page",children:Object(n.jsx)("div",{children:r})})},E=a(360),B=a(363),S=a(367);var F=function(e){var t=e.testData,a=e.testIndex,s=e.dispatch,r=function(e,t,r){return Object(n.jsxs)("div",{children:[Object(n.jsx)(f.a,{color:"secondary",checked:e.correct,onChange:function(e){return s({type:"handleCheckbox",event:e,qIndex:r,aIndex:t})}}),Object(n.jsx)(S.a,{className:"answerItem",value:e.answer,onChange:function(e){return s({type:"handleAnswer",event:e,qIndex:r,aIndex:t})},variant:"outlined"}),Object(n.jsx)(E.a,{size:"medium",onClick:function(){return s({type:"removeAnswer",qIndex:r,aIndex:t})},children:Object(n.jsx)(B.a,{children:"delete"})}),Object(n.jsx)("br",{})]},"answer"+a+r+t)};return""!==a?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(S.a,{className:"questionItem",value:t.test,onChange:function(e){return s({type:"handleTest",event:e})},variant:"outlined"}),Object(n.jsx)(E.a,{size:"medium",onClick:function(){return s({type:"removeTest"})},children:Object(n.jsx)(B.a,{children:"delete"})}),t.questions.map((function(e,t){return c=e,i=t,Object(n.jsx)(m.a,{className:"questionCard",children:Object(n.jsxs)("div",{children:[Object(n.jsx)(S.a,{className:"questionItem",value:c.question,onChange:function(e){return s({type:"handleQuestion",event:e,qIndex:i})},variant:"outlined"}),Object(n.jsx)(E.a,{size:"medium",onClick:function(){return s({type:"removeQuestion",qIndex:i})},children:Object(n.jsx)(B.a,{children:"delete"})}),Object(n.jsx)("br",{}),c.answers.map((function(e,t){return r(e,t,i)})),Object(n.jsx)("br",{}),Object(n.jsxs)(E.a,{size:"medium",className:"answer",onClick:function(){return s({type:"addAnswer",qIndex:i})},children:[Object(n.jsx)(B.a,{children:"add-circle"}),Object(n.jsx)("span",{children:"\xa0Lis\xe4\xe4 vastaus"})]})]})},"question"+a+i);var c,i})),Object(n.jsxs)(E.a,{size:"medium",className:"answer",onClick:function(){return s({type:"addQuestion"})},children:[Object(n.jsx)(B.a,{children:"add-circle"}),Object(n.jsx)(C.a,{id:"app.add-question-button",description:"Tests-button on AppBar",children:function(e){return Object(n.jsxs)("span",{children:["\xa0",e]})}})]})]}):null};var N=function(e){var t=e.state,a=e.dispatch;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{children:function(){if(t.data!==[])return Object(n.jsxs)(n.Fragment,{children:[t.data.map((function(e,s){return Object(n.jsx)(h.a,{color:"primary",onClick:function(){a({type:"setTest",test:s})},children:e.name},""+s+t.data[s].test)})),Object(n.jsxs)(E.a,{size:"medium",className:"answer",onClick:function(){return a({type:"addTest"})},children:[Object(n.jsx)(B.a,{children:"add-circle"}),Object(n.jsx)(C.a,{id:"app.add-test-button",description:"Tests-button on AppBar",children:function(e){return Object(n.jsxs)("span",{children:["\xa0",e]})}})]})]})}()}),Object(n.jsx)("div",{className:"test",children:Object(n.jsx)(F,{testData:t.data[t.activeTest],testIndex:t.activeTest,dispatch:a})})]})},D=a(107),_={labels:["Matematiikka","Biologia","Historia","Yhteenlasku","2. Maailmansota","\xc4idinkieli","Englanti"],datasets:[{label:"Oikein",backgroundColor:"rgba(99,255,132,0.2)",borderColor:"rgba(99,255,132,1)",borderWidth:1,hoverBackgroundColor:"rgba(99,255,132,0.4)",hoverBorderColor:"rgba(99,255,132,1)",data:[65,3,20,81,56,55,40]},{label:"V\xe4\xe4rin",backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgba(255,99,132,1)",borderWidth:1,hoverBackgroundColor:"rgba(255,99,132,0.4)",hoverBorderColor:"rgba(255,99,132,1)",data:[20,59,40,2,56,55,40]}]},M={labels:["Matematiikka","Biologia","Historia","Yhteenlasku","2. Maailmansota","\xc4idinkieli","Englanti"],datasets:[{data:[20,59,40,2,56,55,40],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#FF6384","#36A2EB","#FFCE56","#36A2EB"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#FF6384","#36A2EB","#FFCE56","#36A2EB"]}]};var z=function(){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Pylv\xe4sdiagrammi esimerkki"}),Object(n.jsx)(D.Bar,{data:_,width:100,height:50,options:{scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}}})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"V\xe4\xe4rien vastauksien m\xe4\xe4r\xe4"}),Object(n.jsx)(D.Pie,{data:M})]})]})};var L=function(e){var t=e.state,a=e.login,r=Object(s.useState)("miika@tolonen.fi"),c=Object(j.a)(r,2),i=c[0],o=c[1],d=Object(s.useState)("salainensana"),u=Object(j.a)(d,2),l=u[0],p=u[1];return Object(n.jsxs)("div",{children:[Object(n.jsxs)("form",{children:[Object(n.jsxs)("span",{children:["K\xe4ytt\xe4j\xe4nimi:",Object(n.jsx)("br",{})]}),Object(n.jsx)(S.a,{defaultValue:"miika@tolonen.fi",onChange:function(e){return o(e.target.value)},variant:"outlined"}),Object(n.jsx)("span",{children:"Salasana:"}),Object(n.jsx)(S.a,{defaultValue:"salainensana",onChange:function(e){return p(e.target.value)},type:"password",variant:"outlined"}),Object(n.jsx)(h.a,{type:"submit",variant:"contained",color:"primary",onClick:function(e){a(e,i,l)},children:Object(n.jsx)(C.a,{id:"app.login-button",defaultMessage:"Kirjaudu",description:"Tests-button on AppBar"})},"Login-Button")]}),1===t.file?Object(n.jsx)("img",{src:"http://localhost:4000/static/testfile.jpeg"}):null]})},H=a(50),P=a(14),K=a(364),J=a(157),R=a(154),V=a.n(R),Q=null,W=null;Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HEROKU?(W="https://fs2020-tentti.herokuapp.com/",Q="http://fs2020-tentti.herokuapp.com/"):(W="http://localhost:4000/",Q="http://localhost:4000");function U(e,t){var a=JSON.parse(JSON.stringify(e));switch(t.type){case"handleCheckbox":return a.data[a.activeTest].questions[t.qIndex].answers[t.aIndex].correct=t.event.target.checked,a;case"handleTest":return a.data[a.activeTest].test=t.event.target.value,a;case"handleQuestion":return a.data[a.activeTest].questions[t.qIndex].text=t.event.target.value,a;case"handleAnswer":return a.data[a.activeTest].questions[t.qIndex].answers[t.aIndex].answer=t.event.target.value,a;case"addTest":return a.data.push({test:"test",questions:[]}),a;case"addQuestion":return a.data[a.activeTest].questions.push({text:"text",answers:[]}),a;case"addAnswer":return a.data[a.activeTest].questions[t.qIndex].answers.push({answer:"answer",checked:!1,correct:!1}),a;case"changeAnswer":return a.data[e.activeTest].questions[t.qIndex].answers[t.aIndex].checked=t.event.target.checked,a;case"removeTest":return a.data.splice(a.activeTest,1),a.activeTest="",a;case"removeQuestion":return a.data[a.activeTest].questions.splice(t.qIndex,1),a;case"removeAnswer":return a.data[a.activeTest].questions[t.qIndex].answers.splice(t.aIndex,1),a;case"setFetchData":case"setSaveData":return a.fetchData=t.fetchData,a;case"setTest":return a.activeTest=t.test,a;case"setToken":return a.token=t.payload,a;case"setAnswers":return a.answers=t.payload,a;case"fileAccepted":return a.file=1,a;case"INIT_LIST":return a.fetchData=t.fetchData,a.data=t.data,a;case"INIT_TEST":return a.data[a.activeTest].questions=t.data,a;default:throw new Error("No action specified")}}var G=function(){var e=Object(s.useReducer)(U,{file:0,token:0,data:[],activeTest:"",fetchData:!0,saveData:!1,answers:!1,showChart:!1}),t=Object(j.a)(e,2),a=t[0],r=t[1],c=(Object(K.a)(),Object(x.b)()),i=c.enqueueSnackbar,d=(c.closeSnackbar,function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get(W+"tenttilista/1",{headers:{Authorization:"Bearer "+a.token}});case 3:if(!((t=e.sent).data.length>0)){e.next=8;break}r({type:"INIT_LIST",data:t.data,fetchData:!1}),e.next=9;break;case 8:throw new Error("Ei dataa.. luodaan..");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()),v=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("GET "+W+"tentti/"+t),e.next=4,O.a.get(W+"tentti/"+t,{headers:{Authorization:"Bearer "+a.token}});case 4:if(!((n=e.sent).data.length>0)){e.next=9;break}r({type:"INIT_TEST",data:n.data}),e.next=10;break;case 9:throw new Error("Tentin hakemisessa tapahtui virhe");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.put(W+"tentit",a.data[a.activeTest],{headers:{Authorization:"Bearer "+a.token}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Datan p\xe4ivitys ei onnistunut ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(u.a.mark((function e(t,a,n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.a.post(W+"login",{email:a,password:n});case 4:return s=e.sent,console.log(s.data),r({type:"setToken",payload:s.data}),e.abrupt("return");case 10:e.prev=10,e.t0=e.catch(1),console.log("Kirjautuminen ei onnistunut ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t[0]),console.log("post kuva"),e.prev=3,e.next=6,O.a.post(W+"upload",n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+a.token}});case 6:if("Tiedosto vastaanotettu"!=e.sent.data){e.next=12;break}console.log("fileAccepted"),r({type:"fileAccepted"}),e.next=13;break;case 12:throw new Error("Tiedostoa ei voitu ladata");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){if(0!==a.token){var e=V()(Q,{extraHeaders:{Authorization:"Bearer "+a.token}});e.on("connected",(function(t){i("Socket.io: Connected"),e.emit("ready for data",{})})),e.on("update",(function(t){var a=JSON.parse(t.message.payload);return console.log(a),"insert test"===a.type?i("Uusi tentti luotu tietokantaan"):"update test"===a.type&&i("Tentti\xe4 "),function(){return e.disconnect()}}))}}),[a.token]),Object(s.useEffect)((function(){0!==a.token&&d()}),[a.token]),Object(s.useEffect)((function(){console.log("Tallennetaan"),f()}),[a.saveData]),Object(s.useEffect)((function(){a.data.length&&!a.data[a.activeTest].questions.length&&(console.log("Haetaan dataa"),v(a.data[a.activeTest].tenttiid))}),[a.activeTest]),Object(n.jsx)(H.a,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(p.a,{position:"static",color:"primary",children:Object(n.jsxs)(b.a,{children:[Object(n.jsx)(h.a,{component:H.b,to:"/",children:Object(n.jsx)(C.a,{id:"app.tests-button",defaultMessage:"Tests",description:"Tests-button on AppBar"})}),Object(n.jsx)(h.a,{component:H.b,to:"/kuvaajat",children:Object(n.jsx)(C.a,{id:"app.graphs-button",defaultMessage:"Graphs",description:"Tests-button on AppBar"})}),Object(n.jsx)(h.a,{component:H.b,to:"/hallinta",children:Object(n.jsx)(C.a,{id:"app.control-button",defaultMessage:"Control",description:"Tests-button on AppBar"})}),0===a.token?Object(n.jsx)(h.a,{component:H.b,to:"/login",children:Object(n.jsx)(C.a,{id:"app.login-button",defaultMessage:"Login",description:"Tests-button on AppBar"})}):Object(n.jsx)(h.a,{component:H.b,to:"/login",children:Object(n.jsx)(C.a,{id:"app.logout-button",defaultMessage:"Logout",description:"Tests-button on AppBar"})}),Object(n.jsx)("div",{children:Object(n.jsx)(J.a,{accept:"image/jpeg",multiple:!1,onDrop:function(e){console.log(e),m(e)},children:function(e){var t=e.getRootProps,a=e.getInputProps;return Object(n.jsx)("section",{children:Object(n.jsxs)("div",Object(o.a)(Object(o.a)({},t()),{},{children:[Object(n.jsx)("input",Object(o.a)({},a())),Object(n.jsx)("p",{children:"Ved\xe4 tiedosto t\xe4h\xe4n tai klikkaa valitaksesi tiedoston"})]}))})}})})]})}),Object(n.jsx)("div",{className:"page",children:Object(n.jsxs)(P.c,{children:[Object(n.jsx)(P.a,{path:"/kuvaajat",children:Object(n.jsx)(z,{})}),Object(n.jsx)(P.a,{path:"/hallinta",children:Object(n.jsx)(N,{state:a,dispatch:r})}),Object(n.jsx)(P.a,{exact:!0,path:"/",children:Object(n.jsx)(A,{state:a,dispatch:r})}),Object(n.jsx)(P.a,{path:"/login",children:Object(n.jsx)(L,{state:a,login:g})})]})})]})})},Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,373)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))},$=a(369),X={fi:a(155),en:a(156)},Z=navigator.language.split(/[-_]/)[0];i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)($.a,{locale:Z,messages:X[Z],children:Object(n.jsx)(x.a,{maxSnack:3,anchorOrigin:{horizontal:"right",vertical:"bottom"},variant:"info",children:Object(n.jsx)(G,{})})})}),document.getElementById("root")),Y()},91:function(e,t,a){}},[[324,1,2]]]);
//# sourceMappingURL=main.59233329.chunk.js.map